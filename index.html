<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Kat Planı Üretici</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background: linear-gradient(135deg, #ece9e6, #ffffff);
  }
  .container {
    max-width: 1000px;
    margin: 30px auto;
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
  }
  h1 {
    text-align: center;
    color: #333;
  }
  .form {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
    margin-bottom: 20px;
  }
  input, select, button {
    padding: 10px;
    font-size: 14px;
    border-radius: 6px;
    border: 1px solid #ccc;
  }
  button {
    background: #4CAF50;
    color: white;
    cursor: pointer;
    transition: background 0.3s;
  }
  button:hover {
    background: #45a049;
  }
  #svgContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: auto;
    padding: 20px;
    border: 2px dashed #ccc;
    border-radius: 10px;
    background: #fafafa;
  }
</style>
</head>
<body>
<div class="container">
  <h1>Kat Planı Üretici</h1>
  <div class="form">
    <input type="text" id="projectName" placeholder="Proje Adı">
    <select id="apartmentType">
      <option value="">Daire Tipi</option>
      <option value="studio">Stüdyo</option>
      <option value="1+1">1+1</option>
      <option value="2+1">2+1</option>
      <option value="3+1">3+1</option>
    </select>
    <input type="number" id="area" placeholder="Alan (m²)">
    <select id="streetSides">
      <option value="1">1 Cephe</option>
      <option value="2">2 Cephe</option>
      <option value="3">3 Cephe</option>
      <option value="4">4 Cephe</option>
    </select>
    <button onclick="generateFloorPlan()">Plan Oluştur</button>
  </div>
  <div id="svgContainer"></div>
</div>

<script>
function generateFloorPlan() {
  const projectName = document.getElementById('projectName').value;
  const type = document.getElementById('apartmentType').value;
  const areaSize = Number(document.getElementById('area').value);
  const sides = Number(document.getElementById('streetSides').value);

  if (!projectName || !type || !areaSize) {
    alert("Lütfen tüm alanları doldurun!");
    return;
  }

  // SVG boyutu m²'ye göre ayarlanacak
  const baseSize = 400; // küçük m² için temel boyut
  const scaleFactor = Math.sqrt(areaSize / 50); // m² büyüdükçe SVG büyüsün
  const svgWidth = baseSize * scaleFactor;
  const svgHeight = baseSize * scaleFactor * 0.75;

  let baseRooms = [];
  if (type === 'studio') {
    baseRooms = [
      { name: 'Oda', color: '#FFD700' },
      { name: 'Banyo', color: '#ADD8E6' }
    ];
  } else if (type === '1+1') {
    baseRooms = [
      { name: 'Oturma Odası', color: '#FFD700' },
      { name: 'Mutfak', color: '#98FB98' },
      { name: 'Yatak Odası', color: '#FFB6C1' },
      { name: 'Banyo', color: '#ADD8E6' }
    ];
  } else if (type === '2+1') {
    baseRooms = [
      { name: 'Oturma Odası', color: '#FFD700' },
      { name: 'Mutfak', color: '#98FB98' },
      { name: 'Yatak Odası 1', color: '#FFB6C1' },
      { name: 'Yatak Odası 2', color: '#FFB6C1' },
      { name: 'Banyo', color: '#ADD8E6' }
    ];
  } else if (type === '3+1') {
    baseRooms = [
      { name: 'Oturma Odası', color: '#FFD700' },
      { name: 'Mutfak', color: '#98FB98' },
      { name: 'Yatak Odası 1', color: '#FFB6C1' },
      { name: 'Yatak Odası 2', color: '#FFB6C1' },
      { name: 'Yatak Odası 3', color: '#FFB6C1' },
      { name: 'Banyo', color: '#ADD8E6' }
    ];
  }

  const totalRoomCount = baseRooms.length;
  const roomArea = areaSize / totalRoomCount;
  const m2ToPx = svgWidth / Math.sqrt(areaSize); // m²'ye göre px ölçeği

  const rooms = baseRooms.map((room, i) => {
    const sideLength = Math.sqrt(roomArea) * m2ToPx;
    const colCount = Math.ceil(Math.sqrt(totalRoomCount));
    const row = Math.floor(i / colCount);
    const col = i % colCount;

    return {
      ...room,
      x: col * (sideLength + 5),
      y: 40 + row * (sideLength + 5),
      w: sideLength,
      h: sideLength
    };
  });

  let svg = `<svg width="${svgWidth}" height="${svgHeight}">
    <rect x="0" y="30" width="${svgWidth - 2}" height="${svgHeight - 50}" 
      fill="none" stroke="#000" stroke-width="2"/>
    <text x="${svgWidth / 2}" y="20" font-size="16" text-anchor="middle">
      ${projectName} - ${type.toUpperCase()} (${areaSize} m²)
    </text>`;

  rooms.forEach(r => {
    svg += `<rect x="${r.x}" y="${r.y}" width="${r.w}" height="${r.h}" 
              fill="${r.color}" stroke="#000" stroke-width="1"/>
            <text x="${r.x + r.w / 2}" y="${r.y + r.h / 2}" 
              font-size="10" text-anchor="middle" dominant-baseline="middle">
              ${r.name}
            </text>`;
  });

  if (sides >= 1) svg += `<text x="5" y="25" font-size="10">Sokak</text>`;
  if (sides >= 2) svg += `<text x="${svgWidth - 40}" y="25" font-size="10">Sokak</text>`;
  if (sides >= 3) svg += `<text x="5" y="${svgHeight - 5}" font-size="10">Sokak</text>`;
  if (sides >= 4) svg += `<text x="${svgWidth - 40}" y="${svgHeight - 5}" font-size="10">Sokak</text>`;

  svg += `</svg>`;

  document.getElementById('svgContainer').innerHTML = svg;
}
</script>
</body>
</html>
