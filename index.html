<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Kat Planı Oluşturucu</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="Dinamik mimari kat planı oluşturma uygulaması">
    <meta name="theme-color" content="#3b82f6">
    <meta name="background-color" content="#ffffff">
    <meta name="display" content="standalone">
    <meta name="start_url" content="/">
    
    <!-- Apple PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="KatPlanı">
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png">
    <link rel="apple-touch-startup-image" href="/icons/icon-512x512.png">
    
    <!-- Microsoft PWA Meta Tags -->
    <meta name="msapplication-TileColor" content="#3b82f6">
    <meta name="msapplication-TileImage" content="/icons/icon-144x144.png">
    <meta name="msapplication-config" content="/browserconfig.xml">
    
    <!-- Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/icon-16x16.png">
    <link rel="shortcut icon" href="/favicon.ico">
    
    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel Standalone -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Custom Styles -->
    <style>
        /* PWA Splash Screen */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease-in-out;
        }
        
        .splash-hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .splash-logo {
            width: 120px;
            height: 120px;
            background: white;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        
        /* Install prompt */
        .install-prompt {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #1f2937;
            color: white;
            padding: 12px 20px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            display: none;
            align-items: center;
            gap: 10px;
            z-index: 1000;
            animation: slideUp 0.3s ease-out;
        }
        
        @keyframes slideUp {
            from { transform: translate(-50%, 100px); opacity: 0; }
            to { transform: translate(-50%, 0); opacity: 1; }
        }
        
        .install-prompt button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .install-prompt button:hover {
            background: #2563eb;
        }
        
        /* Responsive optimizations */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
        }
        
        /* Print styles */
        @media print {
            .no-print {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash-screen" class="splash-screen">
        <div class="splash-logo">
            <svg width="60" height="60" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="10" y="20" width="80" height="60" fill="#3b82f6" rx="4"/>
                <rect x="20" y="30" width="25" height="20" fill="white" rx="2"/>
                <rect x="55" y="30" width="25" height="20" fill="white" rx="2"/>
                <rect x="20" y="55" width="25" height="20" fill="white" rx="2"/>
                <rect x="55" y="55" width="25" height="20" fill="white" rx="2"/>
                <circle cx="50" cy="10" r="3" fill="#3b82f6"/>
            </svg>
        </div>
    </div>

    <!-- Install Prompt -->
    <div id="install-prompt" class="install-prompt">
        <span>📱 Uygulamayı ana ekranınıza ekleyin</span>
        <button id="install-button">Yükle</button>
        <button id="close-prompt" style="background: #6b7280;">×</button>
    </div>

    <!-- React App Container -->
    <div id="root"></div>

    <!-- App Script -->
    <script type="text/babel">
        const { useState, useEffect } = React;
        const { createRoot } = ReactDOM;
        
        // Your React component code goes here
        // (Önceki React component kodunu buraya kopyala)
        
        const FloorPlanGenerator = () => {
            // Component code from previous artifact
            const [projectName, setProjectName] = useState('');
            const [roomConfig, setRoomConfig] = useState('2+1');
            const [totalM2, setTotalM2] = useState(100);
            const [roadFaces, setRoadFaces] = useState(1);
            const [floorPlan, setFloorPlan] = useState(null);

            const calculateRoomSizes = (config, totalArea) => {
                const baseRooms = {
                    '1+1': { salon: 0.4, yatak1: 0.25, mutfak: 0.15, banyo: 0.1, koridor: 0.1 },
                    '2+1': { salon: 0.35, yatak1: 0.2, yatak2: 0.15, mutfak: 0.15, banyo: 0.08, koridor: 0.07 },
                    '3+1': { salon: 0.3, yatak1: 0.18, yatak2: 0.15, yatak3: 0.12, mutfak: 0.12, banyo: 0.08, koridor: 0.05 },
                    '4+1': { salon: 0.25, yatak1: 0.16, yatak2: 0.14, yatak3: 0.12, yatak4: 0.1, mutfak: 0.12, banyo: 0.08, koridor: 0.03 }
                };
                const ratios = baseRooms[config] || baseRooms['2+1'];
                const rooms = {};
                Object.keys(ratios).forEach(room => {
                    rooms[room] = Math.round(totalArea * ratios[room]);
                });
                return rooms;
            };

            const generateFloorPlan = () => {
                const rooms = calculateRoomSizes(roomConfig, totalM2);
                const plan = createFloorPlanSVG(rooms, roadFaces);
                setFloorPlan(plan);
            };

            const createFloorPlanSVG = (rooms, faces) => {
                // SVG generation code (same as before)
                const width = 800;
                const height = 600;
                const margin = 40;
                
                let buildingWidth, buildingHeight;
                if (faces === 1) {
                    buildingWidth = width - 2 * margin;
                    buildingHeight = height - 2 * margin;
                } else if (faces === 2) {
                    buildingWidth = width - 2 * margin;
                    buildingHeight = height - 2 * margin - 50;
                } else {
                    buildingWidth = width - 2 * margin - 60;
                    buildingHeight = height - 2 * margin - 60;
                }

                const roomElements = [];
                const roomNames = Object.keys(rooms);
                const totalRooms = roomNames.length;
                const cols = Math.ceil(Math.sqrt(totalRooms));
                const rows = Math.ceil(totalRooms / cols);
                const cellWidth = buildingWidth / cols;
                const cellHeight = buildingHeight / rows;

                let roomIndex = 0;
                for (let row = 0; row < rows; row++) {
                    for (let col = 0; col < cols; col++) {
                        if (roomIndex >= totalRooms) break;
                        
                        const roomName = roomNames[roomIndex];
                        const roomArea = rooms[roomName];
                        const areaRatio = Math.sqrt(roomArea / 25);
                        const roomWidth = Math.min(cellWidth * 0.9, cellWidth * areaRatio * 0.8 + cellWidth * 0.3);
                        const roomHeight = Math.min(cellHeight * 0.9, cellHeight * areaRatio * 0.8 + cellHeight * 0.3);
                        const x = margin + col * cellWidth + (cellWidth - roomWidth) / 2;
                        const y = margin + row * cellHeight + (cellHeight - roomHeight) / 2;

                        const roomColors = {
                            salon: '#e0f2fe', mutfak: '#fff3e0', banyo: '#f3e5f5',
                            koridor: '#f1f8e9', yatak1: '#fff8e1', yatak2: '#fce4ec',
                            yatak3: '#e8f5e8', yatak4: '#fff3e0'
                        };
                        const color = roomColors[roomName] || '#f5f5f5';

                        roomElements.push(
                            React.createElement('g', { key: roomName },
                                React.createElement('rect', {
                                    x, y, width: roomWidth, height: roomHeight,
                                    fill: color, stroke: "#333", strokeWidth: "2", rx: "4"
                                }),
                                React.createElement('text', {
                                    x: x + roomWidth / 2, y: y + roomHeight / 2 - 10,
                                    textAnchor: "middle", className: "text-sm font-semibold", fill: "#333"
                                }, roomName.charAt(0).toUpperCase() + roomName.slice(1)),
                                React.createElement('text', {
                                    x: x + roomWidth / 2, y: y + roomHeight / 2 + 8,
                                    textAnchor: "middle", className: "text-xs", fill: "#666"
                                }, roomArea + 'm²')
                            )
                        );
                        roomIndex++;
                    }
                }

                const roadElements = [];
                if (faces >= 1) {
                    roadElements.push(React.createElement('rect', { 
                        key: 'road1', x: margin - 20, y: height - 30, 
                        width: buildingWidth + 40, height: 20, fill: '#666' 
                    }));
                }
                if (faces >= 2) {
                    roadElements.push(React.createElement('rect', { 
                        key: 'road2', x: 10, y: margin, 
                        width: 20, height: buildingHeight, fill: '#666' 
                    }));
                }
                if (faces >= 3) {
                    roadElements.push(React.createElement('rect', { 
                        key: 'road3', x: margin - 20, y: 10, 
                        width: buildingWidth + 40, height: 20, fill: '#666' 
                    }));
                }

                return React.createElement('svg', {
                    width, height, 
                    className: "border border-gray-300 bg-white rounded-lg"
                },
                    ...roadElements,
                    React.createElement('rect', {
                        x: margin, y: margin, width: buildingWidth, height: buildingHeight,
                        fill: "none", stroke: "#000", strokeWidth: "3"
                    }),
                    ...roomElements,
                    React.createElement('text', {
                        x: width/2, y: 25, textAnchor: "middle", 
                        className: "text-lg font-bold", fill: "#333"
                    }, `${projectName || 'Kat Planı'} - ${roomConfig} (${totalM2}m²)`)
                );
            };

            const downloadSVG = () => {
                if (!floorPlan) return;
                const svgElement = document.querySelector('svg');
                const serializer = new XMLSerializer();
                const svgString = serializer.serializeToString(svgElement);
                const blob = new Blob([svgString], { type: 'image/svg+xml' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${projectName || 'kat-plani'}.svg`;
                a.click();
                URL.revokeObjectURL(url);
            };

            return React.createElement('div', { className: "min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4" },
                React.createElement('div', { className: "max-w-6xl mx-auto" },
                    // Header
                    React.createElement('div', { className: "bg-white rounded-xl shadow-lg p-6 mb-6" },
                        React.createElement('div', { className: "flex items-center gap-3 mb-4" },
                            React.createElement('div', { className: "w-8 h-8 text-blue-600" }, "🏠"),
                            React.createElement('h1', { className: "text-2xl font-bold text-gray-800" }, "Dinamik Kat Planı Oluşturucu")
                        ),
                        // Form controls...
                        React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4" },
                            // Project name input
                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "Proje Adı"),
                                React.createElement('input', {
                                    type: "text", value: projectName,
                                    onChange: (e) => setProjectName(e.target.value),
                                    placeholder: "Proje adını girin",
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                })
                            ),
                            // Room config select
                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "Oda Konfigürasyonu"),
                                React.createElement('select', {
                                    value: roomConfig,
                                    onChange: (e) => setRoomConfig(e.target.value),
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                },
                                    React.createElement('option', { value: "1+1" }, "1+1"),
                                    React.createElement('option', { value: "2+1" }, "2+1"),
                                    React.createElement('option', { value: "3+1" }, "3+1"),
                                    React.createElement('option', { value: "4+1" }, "4+1")
                                )
                            ),
                            // M2 input
                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, `Toplam M² (${totalM2}m²)`),
                                React.createElement('input', {
                                    type: "range", min: "50", max: "300", value: totalM2,
                                    onChange: (e) => setTotalM2(parseInt(e.target.value)),
                                    className: "w-full"
                                }),
                                React.createElement('input', {
                                    type: "number", min: "50", max: "300", value: totalM2,
                                    onChange: (e) => setTotalM2(parseInt(e.target.value)),
                                    className: "w-full mt-1 px-3 py-1 border border-gray-300 rounded text-sm"
                                })
                            ),
                            // Road faces select
                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "Yol Cephesi Sayısı"),
                                React.createElement('select', {
                                    value: roadFaces,
                                    onChange: (e) => setRoadFaces(parseInt(e.target.value)),
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                },
                                    React.createElement('option', { value: 1 }, "1 Cephe"),
                                    React.createElement('option', { value: 2 }, "2 Cephe"),
                                    React.createElement('option', { value: 3 }, "3+ Cephe")
                                )
                            )
                        ),
                        React.createElement('div', { className: "flex gap-3 mt-6" },
                            React.createElement('button', {
                                onClick: generateFloorPlan,
                                className: "flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors"
                            }, "⚙️ Kat Planı Oluştur"),
                            floorPlan && React.createElement('button', {
                                onClick: downloadSVG,
                                className: "flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium transition-colors"
                            }, "📥 SVG İndir")
                        )
                    ),
                    // Floor plan display
                    floorPlan && React.createElement('div', { className: "bg-white rounded-xl shadow-lg p-6" },
                        React.createElement('h2', { className: "text-xl font-semibold text-gray-800 mb-4" }, "Kat Planı Önizlemesi"),
                        React.createElement('div', { className: "flex justify-center" }, floorPlan),
                        React.createElement('div', { className: "mt-6 grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3" },
                            Object.entries(calculateRoomSizes(roomConfig, totalM2)).map(([room, area]) =>
                                React.createElement('div', { key: room, className: "bg-gray-50 rounded-lg p-3 text-center" },
                                    React.createElement('div', { className: "font-medium text-gray-800 capitalize" }, room),
                                    React.createElement('div', { className: "text-sm text-gray-600" }, area + 'm²')
                                )
                            )
                        )
                    ),
                    // PWA info
                    React.createElement('div', { className: "mt-6 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl p-6 text-white" },
                        React.createElement('h3', { className: "text-lg font-semibold mb-2" }, "📱 Mobil Uygulama Olarak Kaydet"),
           
